{
  "resourceType": "Library",
  "id": "SafeUseofOpioidsConcurrentPrescribingFHIR",
  "meta": {
    "profile": [ "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-library-cqfm" ]
  },
  "language": "en",
  "text": {
    "status": "extensions",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table class=\"grid dict\">\n        \n            <tr>\n                <th scope=\"row\"><b>Id: </b></th>\n                <td style=\"padding-left: 4px;\">SafeUseofOpioidsConcurrentPrescribingFHIR</td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Url: </b></th>\n                <td style=\"padding-left: 4px;\">http://ecqi.healthit.gov/ecqms/Library/SafeUseofOpioidsConcurrentPrescribingFHIR</td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Version: </b></th>\n                <td style=\"padding-left: 4px;\">0.0.004</td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Identifier: </b></th>\n                <td style=\"padding-left: 4px;\">\n                    \n                    \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>value: </b> <span>SafeUseofOpioidsConcurrentPrescribingFHIR</span>\n                        </p>\n                    \n                </td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Name: </b></th>\n                <td style=\"padding-left: 4px;\">SafeUseofOpioidsConcurrentPrescribingFHIR</td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Title: </b></th>\n                <td style=\"padding-left: 4px;\">SafeUseofOpioidsConcurrentPrescribingFHIR</td>\n            </tr>\n        \n        \n        \n            <tr>\n                <th scope=\"row\"><b>Status: </b></th>\n                <td style=\"padding-left: 4px;\">active</td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Experimental: </b></th>\n                <td style=\"padding-left: 4px;\">false</td>\n            </tr>\n        \n        \n            <tr>\n                <th scope=\"row\"><b>Type: </b></th>\n                <td style=\"padding-left: 4px;\">\n                    \n                        \n                            \n                                <p style=\"margin-bottom: 5px;\">\n                                    <b>system: </b> <span>http://terminology.hl7.org/CodeSystem/library-type</span>\n                                </p>\n                            \n                            \n                                <p style=\"margin-bottom: 5px;\">\n                                    <b>code: </b> <span>logic-library</span>\n                                </p>\n                            \n                            \n                        \n                    \n                    \n                </td>\n            </tr>\n        \n        \n        \n            <tr>\n                <th scope=\"row\"><b>Date: </b></th>\n                <td style=\"padding-left: 4px;\">2023-04-04T17:18:28+00:00</td>\n            </tr>\n        \n        \n        \n            <tr>\n                <th scope=\"row\"><b>Description: </b></th>\n                <td style=\"padding-left: 4px;\">SafeUseofOpioidsConcurrentPrescribingFHIR</td>\n            </tr>\n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n            <tr>\n                <th scope=\"row\"><b>Related Artifacts: </b></th>\n                <td style=\"padding-left: 4px;\">\n                    \n                    \n                    \n                        <p><b>Dependencies</b></p>\n                        <ul>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                                <li/>\n                            \n                        </ul>\n                    \n                    \n                    \n                    \n                    \n                </td>\n            </tr>\n        \n        \n        \n            <tr>\n                <th scope=\"row\"><b>Data Requirements:</b></th>\n                <td style=\"padding-left: 4px;\">\n                    <table class=\"grid-dict\">\n                        <tr><th><b>Type</b></th><th><b>Profile</b></th><th><b>MS</b></th><th><b>Code Filter</b></th></tr>\n                        \n                            <tr>\n                                <th>ServiceRequest</th>\n                                <th/>\n                                <th/>\n                                <th>\n                                    \n                                        <b>code filter: </b>\n                                        \n                                            <br/>\n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                                            \n                                                <br/>\n                                            \n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579</span>\n                      </span>\n                                        \n                                        \n                                    \n                                </th>\n                            </tr>\n                        \n                            <tr>\n                                <th>Procedure</th>\n                                <th/>\n                                <th/>\n                                <th>\n                                    \n                                        <b>code filter: </b>\n                                        \n                                            <br/>\n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                                            \n                                                <br/>\n                                            \n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579</span>\n                      </span>\n                                        \n                                        \n                                    \n                                </th>\n                            </tr>\n                        \n                            <tr>\n                                <th>Condition</th>\n                                <th/>\n                                <th/>\n                                <th>\n                                    \n                                        <b>code filter: </b>\n                                        \n                                            <br/>\n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                                            \n                                                <br/>\n                                            \n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161</span>\n                      </span>\n                                        \n                                        \n                                    \n                                </th>\n                            </tr>\n                        \n                            <tr>\n                                <th>MedicationRequest</th>\n                                <th/>\n                                <th/>\n                                <th>\n                                    \n                                        <b>code filter: </b>\n                                        \n                                            <br/>\n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                                            \n                                                <br/>\n                                            \n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1</span>\n                      </span>\n                                        \n                                        \n                                    \n                                </th>\n                            </tr>\n                        \n                            <tr>\n                                <th>MedicationRequest</th>\n                                <th/>\n                                <th/>\n                                <th>\n                                    \n                                        <b>code filter: </b>\n                                        \n                                            <br/>\n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                                            \n                                                <br/>\n                                            \n                                        \n                                        \n                                            <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.165</span>\n                      </span>\n                                        \n                                        \n                                    \n                                </th>\n                            </tr>\n                        \n                    </table>\n                </td>\n            </tr>\n        \n        \n            \n                <tr>\n                    <td colspan=\"2\">\n                        <table>\n                            <tr><th><a id=\"cql-content\"><b>Content: </b></a> text/cql</th></tr>\n                            <tr><td><pre><code class=\"language-cql\">library SafeUseofOpioidsConcurrentPrescribingFHIR version '0.0.004'\r\n\r\nusing QICore version '4.1.1'\r\n\r\ninclude SupplementalDataElements version '3.1.000' called SDE\r\ninclude FHIRCommon version '4.1.000' called FHIRCommon\r\ninclude FHIRHelpers version '4.1.000' called FHIRHelpers\r\ninclude QICoreCommon version '1.2.000' called QICoreCommon\r\ninclude CQMCommon version '1.0.000' called CQMCommon\r\n\r\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\r\n\r\nvalueset &quot;All Primary and Secondary Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161'\r\nvalueset &quot;Discharge To Acute Care Facility&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87'\r\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\r\nvalueset &quot;Hospice Care Referral or Admission&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365'\r\nvalueset &quot;Palliative or Hospice Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579'\r\nvalueset &quot;Patient Expired&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309'\r\nvalueset &quot;Schedule II &amp; III Opioid Medications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.165'\r\nvalueset &quot;Schedule IV Benzodiazepines&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1'\r\n\r\ncode &quot;Birth date&quot;: '21112-8' from &quot;LOINC&quot; display 'Birth date'\r\n\r\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\r\n\r\ncontext Patient\r\n\r\ndefine &quot;Denominator&quot;:\r\n  &quot;Initial Population&quot;\r\n\r\ndefine &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot;:\r\n  CQMCommon.&quot;Inpatient Encounter&quot; InpatientHospitalEncounter\r\n    where AgeInYearsAt(date from start of InpatientHospitalEncounter.period) &gt;= 18\r\n\r\ndefine &quot;SDE Ethnicity&quot;:\r\n  SDE.&quot;SDE Ethnicity&quot;\r\n\r\ndefine &quot;SDE Payer&quot;:\r\n  SDE.&quot;SDE Payer&quot;\r\n\r\ndefine &quot;SDE Race&quot;:\r\n  SDE.&quot;SDE Race&quot;\r\n\r\ndefine &quot;SDE Sex&quot;:\r\n  SDE.&quot;SDE Sex&quot;\r\n\r\ndefine &quot;Intervention Palliative or Hospice Care&quot;:\r\n  [ServiceRequest: code in &quot;Palliative or Hospice Care&quot;]\r\n    union [Procedure: &quot;Palliative or Hospice Care&quot;]\r\n\r\ndefine &quot;Initial Population&quot;:\r\n  &quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&quot;\r\n\r\ndefine &quot;Denominator Exclusion&quot;:\n  /*Excludes encounters of patients with cancer or who are receiving palliative or hospice care at the time of the encounter*/\r\n  \r\n  &quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&quot; InpatientEncounter\r\n    where exists ( [Condition: &quot;All Primary and Secondary Cancer&quot;] Cancer\r\n        where QICoreCommon.&quot;ToPrevalenceInterval&quot; ( Cancer ) overlaps InpatientEncounter.period\r\n    )\r\n      or exists ( &quot;Intervention Palliative or Hospice Care&quot; PalliativeOrHospiceCare\r\n          where Coalesce(start of QICoreCommon.&quot;ToInterval&quot;(PalliativeOrHospiceCare.performed), PalliativeOrHospiceCare.authoredOn) during CQMCommon.&quot;HospitalizationWithObservation&quot; ( InpatientEncounter )\r\n      )\r\n      or exists ( &quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&quot; InpatientEncounter\r\n          where InpatientEncounter.hospitalization.dischargeDisposition in &quot;Discharge To Acute Care Facility&quot;\r\n            or InpatientEncounter.hospitalization.dischargeDisposition in &quot;Hospice Care Referral or Admission&quot;\r\n            or InpatientEncounter.hospitalization.dischargeDisposition in &quot;Patient Expired&quot;\r\n      )\r\n\r\ndefine &quot;Numerator&quot;:\n  /*Encounters of patients prescribed two or more opioids or an opioid and benzodiazepine at discharge.\n                */\r\n  \r\n  ( &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\r\n      where ( Count(&quot;Opioid at Discharge&quot; Opioids\r\n            return distinct Opioids.medication\r\n        ) &gt;= 2\r\n      )\r\n  )\r\n    union ( &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\r\n        with &quot;Opioid at Discharge&quot; OpioidsDischarge\r\n          such that OpioidsDischarge.authoredOn during InpatientEncounter.period\r\n        with &quot;Benzodiazepine at Discharge&quot; BenzodiazepinesDischarge\r\n          such that BenzodiazepinesDischarge.authoredOn during InpatientEncounter.period\r\n    )\r\n\r\ndefine &quot;Benzodiazepine at Discharge&quot;:\r\n  ( [MedicationRequest: &quot;Schedule IV Benzodiazepines&quot;] BenzoMedications\r\n    where exists BenzoMedications.category BenzoCategory\r\n      where BenzoCategory ~ QICoreCommon.&quot;Discharge&quot; ) BenzodiazepineDischargeMedication\r\n    where BenzodiazepineDischargeMedication.status = 'active'\r\n      and BenzodiazepineDischargeMedication.intent = 'plan'\r\n\r\ndefine &quot;Opioid at Discharge&quot;:\r\n  ( [MedicationRequest: &quot;Schedule II &amp; III Opioid Medications&quot;] OpioidMedications\r\n    where exists OpioidMedications.category OpioidCategory\r\n      where OpioidCategory ~ QICoreCommon.&quot;Discharge&quot; ) OpioidDischargeMedication\r\n    where OpioidDischargeMedication.status = 'active'\r\n      and OpioidDischargeMedication.intent = 'plan'\r\n\r\ndefine &quot;Inpatient Encounters with an Opioid or Benzodiazepine at Discharge&quot;:\r\n  &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\r\n    with ( &quot;Opioid at Discharge&quot;\r\n      union &quot;Benzodiazepine at Discharge&quot; ) OpioidOrBenzodiazepineAtDischarge\r\n      such that OpioidOrBenzodiazepineAtDischarge.authoredOn during InpatientEncounter.period</code></pre></td></tr>\n                        </table>\n                    </td>\n                </tr>\n            \n            \n        \n            \n            \n                <tr>\n                    <td colspan=\"2\">\n                        <table>\n                            <tr><th><b>Content: </b> application/elm+xml</th></tr>\n                            <tr><td><pre><code>Encoded data (130136 characters)</code></pre></td></tr>\n                        </table>\n                    </td>\n                </tr>\n            \n        \n            \n            \n                <tr>\n                    <td colspan=\"2\">\n                        <table>\n                            <tr><th><b>Content: </b> application/elm+json</th></tr>\n                            <tr><td><pre><code>Encoded data (180636 characters)</code></pre></td></tr>\n                        </table>\n                    </td>\n                </tr>\n            \n        \n    </table>\n</div>"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "http://ecqi.healthit.gov/ecqms/Library/SafeUseofOpioidsConcurrentPrescribingFHIR",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "SafeUseofOpioidsConcurrentPrescribingFHIR"
  } ],
  "version": "0.0.004",
  "name": "SafeUseofOpioidsConcurrentPrescribingFHIR",
  "title": "SafeUseofOpioidsConcurrentPrescribingFHIR",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2023-04-04T17:18:28+00:00",
  "description": "SafeUseofOpioidsConcurrentPrescribingFHIR",
  "relatedArtifact": [ {
    "id": "21112-8",
    "display": "Birth date",
    "url": "http://loinc.org"
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBTYWZlVXNlb2ZPcGlvaWRzQ29uY3VycmVudFByZXNjcmliaW5nRkhJUiB2ZXJzaW9uICcwLjAuMDA0Jw0KDQp1c2luZyBRSUNvcmUgdmVyc2lvbiAnNC4xLjEnDQoNCmluY2x1ZGUgU3VwcGxlbWVudGFsRGF0YUVsZW1lbnRzIHZlcnNpb24gJzMuMS4wMDAnIGNhbGxlZCBTREUNCmluY2x1ZGUgRkhJUkNvbW1vbiB2ZXJzaW9uICc0LjEuMDAwJyBjYWxsZWQgRkhJUkNvbW1vbg0KaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICc0LjEuMDAwJyBjYWxsZWQgRkhJUkhlbHBlcnMNCmluY2x1ZGUgUUlDb3JlQ29tbW9uIHZlcnNpb24gJzEuMi4wMDAnIGNhbGxlZCBRSUNvcmVDb21tb24NCmluY2x1ZGUgQ1FNQ29tbW9uIHZlcnNpb24gJzEuMC4wMDAnIGNhbGxlZCBDUU1Db21tb24NCg0KY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycNCg0KdmFsdWVzZXQgIkFsbCBQcmltYXJ5IGFuZCBTZWNvbmRhcnkgQ2FuY2VyIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTExMS4xNjEnDQp2YWx1ZXNldCAiRGlzY2hhcmdlIFRvIEFjdXRlIENhcmUgRmFjaWxpdHkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjg3Jw0KdmFsdWVzZXQgIkVuY291bnRlciBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjY2LjUuMzA3Jw0KdmFsdWVzZXQgIkhvc3BpY2UgQ2FyZSBSZWZlcnJhbCBvciBBZG1pc3Npb24iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTE2LjM2NScNCnZhbHVlc2V0ICJQYWxsaWF0aXZlIG9yIEhvc3BpY2UgQ2FyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy42MDAuMS4xNTc5Jw0KdmFsdWVzZXQgIlBhdGllbnQgRXhwaXJlZCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMzA5Jw0KdmFsdWVzZXQgIlNjaGVkdWxlIElJICYgSUlJIE9waW9pZCBNZWRpY2F0aW9ucyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTEuMTY1Jw0KdmFsdWVzZXQgIlNjaGVkdWxlIElWIEJlbnpvZGlhemVwaW5lcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMjUuMScNCg0KY29kZSAiQmlydGggZGF0ZSI6ICcyMTExMi04JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQmlydGggZGF0ZScNCg0KcGFyYW1ldGVyICJNZWFzdXJlbWVudCBQZXJpb2QiIEludGVydmFsPERhdGVUaW1lPg0KICBkZWZhdWx0IEludGVydmFsW0AyMDIzLTAxLTAxVDAwOjAwOjAwLjAsIEAyMDI0LTAxLTAxVDAwOjAwOjAwLjApDQoNCmNvbnRleHQgUGF0aWVudA0KDQpkZWZpbmUgIkRlbm9taW5hdG9yIjoNCiAgIkluaXRpYWwgUG9wdWxhdGlvbiINCg0KZGVmaW5lICJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCI6DQogIENRTUNvbW1vbi4iSW5wYXRpZW50IEVuY291bnRlciIgSW5wYXRpZW50SG9zcGl0YWxFbmNvdW50ZXINCiAgICB3aGVyZSBBZ2VJblllYXJzQXQoZGF0ZSBmcm9tIHN0YXJ0IG9mIElucGF0aWVudEhvc3BpdGFsRW5jb3VudGVyLnBlcmlvZCkgPj0gMTgNCg0KZGVmaW5lICJTREUgRXRobmljaXR5IjoNCiAgU0RFLiJTREUgRXRobmljaXR5Ig0KDQpkZWZpbmUgIlNERSBQYXllciI6DQogIFNERS4iU0RFIFBheWVyIg0KDQpkZWZpbmUgIlNERSBSYWNlIjoNCiAgU0RFLiJTREUgUmFjZSINCg0KZGVmaW5lICJTREUgU2V4IjoNCiAgU0RFLiJTREUgU2V4Ig0KDQpkZWZpbmUgIkludGVydmVudGlvbiBQYWxsaWF0aXZlIG9yIEhvc3BpY2UgQ2FyZSI6DQogIFtTZXJ2aWNlUmVxdWVzdDogY29kZSBpbiAiUGFsbGlhdGl2ZSBvciBIb3NwaWNlIENhcmUiXQ0KICAgIHVuaW9uIFtQcm9jZWR1cmU6ICJQYWxsaWF0aXZlIG9yIEhvc3BpY2UgQ2FyZSJdDQoNCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIHdpdGggYW4gT3Bpb2lkIG9yIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSINCg0KZGVmaW5lICJEZW5vbWluYXRvciBFeGNsdXNpb24iOg0KICAvKkV4Y2x1ZGVzIGVuY291bnRlcnMgb2YgcGF0aWVudHMgd2l0aCBjYW5jZXIgb3Igd2hvIGFyZSByZWNlaXZpbmcgcGFsbGlhdGl2ZSBvciBob3NwaWNlIGNhcmUgYXQgdGhlIHRpbWUgb2YgdGhlIGVuY291bnRlciovDQogIA0KICAiSW5wYXRpZW50IEVuY291bnRlcnMgd2l0aCBhbiBPcGlvaWQgb3IgQmVuem9kaWF6ZXBpbmUgYXQgRGlzY2hhcmdlIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBleGlzdHMgKCBbQ29uZGl0aW9uOiAiQWxsIFByaW1hcnkgYW5kIFNlY29uZGFyeSBDYW5jZXIiXSBDYW5jZXINCiAgICAgICAgd2hlcmUgUUlDb3JlQ29tbW9uLiJUb1ByZXZhbGVuY2VJbnRlcnZhbCIgKCBDYW5jZXIgKSBvdmVybGFwcyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQogICAgKQ0KICAgICAgb3IgZXhpc3RzICggIkludGVydmVudGlvbiBQYWxsaWF0aXZlIG9yIEhvc3BpY2UgQ2FyZSIgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmUNCiAgICAgICAgICB3aGVyZSBDb2FsZXNjZShzdGFydCBvZiBRSUNvcmVDb21tb24uIlRvSW50ZXJ2YWwiKFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlLnBlcmZvcm1lZCksIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlLmF1dGhvcmVkT24pIGR1cmluZyBDUU1Db21tb24uIkhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiIgKCBJbnBhdGllbnRFbmNvdW50ZXIgKQ0KICAgICAgKQ0KICAgICAgb3IgZXhpc3RzICggIklucGF0aWVudCBFbmNvdW50ZXJzIHdpdGggYW4gT3Bpb2lkIG9yIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgICAgICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbi5kaXNjaGFyZ2VEaXNwb3NpdGlvbiBpbiAiRGlzY2hhcmdlIFRvIEFjdXRlIENhcmUgRmFjaWxpdHkiDQogICAgICAgICAgICBvciBJbnBhdGllbnRFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uLmRpc2NoYXJnZURpc3Bvc2l0aW9uIGluICJIb3NwaWNlIENhcmUgUmVmZXJyYWwgb3IgQWRtaXNzaW9uIg0KICAgICAgICAgICAgb3IgSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbi5kaXNjaGFyZ2VEaXNwb3NpdGlvbiBpbiAiUGF0aWVudCBFeHBpcmVkIg0KICAgICAgKQ0KDQpkZWZpbmUgIk51bWVyYXRvciI6DQogIC8qRW5jb3VudGVycyBvZiBwYXRpZW50cyBwcmVzY3JpYmVkIHR3byBvciBtb3JlIG9waW9pZHMgb3IgYW4gb3Bpb2lkIGFuZCBiZW56b2RpYXplcGluZSBhdCBkaXNjaGFyZ2UuDQogICAgICAgICAgICAgICAgKi8NCiAgDQogICggIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICAgIHdoZXJlICggQ291bnQoIk9waW9pZCBhdCBEaXNjaGFyZ2UiIE9waW9pZHMNCiAgICAgICAgICAgIHJldHVybiBkaXN0aW5jdCBPcGlvaWRzLm1lZGljYXRpb24NCiAgICAgICAgKSA+PSAyDQogICAgICApDQogICkNCiAgICB1bmlvbiAoICJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgICAgIHdpdGggIk9waW9pZCBhdCBEaXNjaGFyZ2UiIE9waW9pZHNEaXNjaGFyZ2UNCiAgICAgICAgICBzdWNoIHRoYXQgT3Bpb2lkc0Rpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQogICAgICAgIHdpdGggIkJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSIgQmVuem9kaWF6ZXBpbmVzRGlzY2hhcmdlDQogICAgICAgICAgc3VjaCB0aGF0IEJlbnpvZGlhemVwaW5lc0Rpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQogICAgKQ0KDQpkZWZpbmUgIkJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSI6DQogICggW01lZGljYXRpb25SZXF1ZXN0OiAiU2NoZWR1bGUgSVYgQmVuem9kaWF6ZXBpbmVzIl0gQmVuem9NZWRpY2F0aW9ucw0KICAgIHdoZXJlIGV4aXN0cyBCZW56b01lZGljYXRpb25zLmNhdGVnb3J5IEJlbnpvQ2F0ZWdvcnkNCiAgICAgIHdoZXJlIEJlbnpvQ2F0ZWdvcnkgfiBRSUNvcmVDb21tb24uIkRpc2NoYXJnZSIgKSBCZW56b2RpYXplcGluZURpc2NoYXJnZU1lZGljYXRpb24NCiAgICB3aGVyZSBCZW56b2RpYXplcGluZURpc2NoYXJnZU1lZGljYXRpb24uc3RhdHVzID0gJ2FjdGl2ZScNCiAgICAgIGFuZCBCZW56b2RpYXplcGluZURpc2NoYXJnZU1lZGljYXRpb24uaW50ZW50ID0gJ3BsYW4nDQoNCmRlZmluZSAiT3Bpb2lkIGF0IERpc2NoYXJnZSI6DQogICggW01lZGljYXRpb25SZXF1ZXN0OiAiU2NoZWR1bGUgSUkgJiBJSUkgT3Bpb2lkIE1lZGljYXRpb25zIl0gT3Bpb2lkTWVkaWNhdGlvbnMNCiAgICB3aGVyZSBleGlzdHMgT3Bpb2lkTWVkaWNhdGlvbnMuY2F0ZWdvcnkgT3Bpb2lkQ2F0ZWdvcnkNCiAgICAgIHdoZXJlIE9waW9pZENhdGVnb3J5IH4gUUlDb3JlQ29tbW9uLiJEaXNjaGFyZ2UiICkgT3Bpb2lkRGlzY2hhcmdlTWVkaWNhdGlvbg0KICAgIHdoZXJlIE9waW9pZERpc2NoYXJnZU1lZGljYXRpb24uc3RhdHVzID0gJ2FjdGl2ZScNCiAgICAgIGFuZCBPcGlvaWREaXNjaGFyZ2VNZWRpY2F0aW9uLmludGVudCA9ICdwbGFuJw0KDQpkZWZpbmUgIklucGF0aWVudCBFbmNvdW50ZXJzIHdpdGggYW4gT3Bpb2lkIG9yIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSI6DQogICJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2l0aCAoICJPcGlvaWQgYXQgRGlzY2hhcmdlIg0KICAgICAgdW5pb24gIkJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSIgKSBPcGlvaWRPckJlbnpvZGlhemVwaW5lQXREaXNjaGFyZ2UNCiAgICAgIHN1Y2ggdGhhdCBPcGlvaWRPckJlbnpvZGlhemVwaW5lQXREaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZA=="
  } ]
}